(this["webpackJsonpamazon-react"]=this["webpackJsonpamazon-react"]||[]).push([[0],{56:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(31),c=a.n(n),i=(a(37),a(10)),l=a(11),o=a(13),r=a(12),h=a(15),b=a(3),j=a(2),d=a(9),u=a.n(d),m=(a(56),a(0));function p(){return Object(m.jsx)("div",{className:"loader"})}var O=function(e){Object(o.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={email:null,password:null,error:null,loading:!1},e.handleType=function(t){var a,s=t.target,n=s.name,c=s.value;e.setState((a={},Object(j.a)(a,n,c),Object(j.a)(a,"error",null),a))},e.handleClick=function(){e.setState({loading:!0}),u.a.post("http://localhost:8080/api/v1/users/login",{email:e.state.email,password:e.state.password}).then((function(t){e.setState({loading:!0}),e.props.onLogin(t.data.token)})).catch((function(t){return e.setState({error:t.response.data.error.message,loading:!1})}))},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"container is-max-desktop",children:Object(m.jsxs)("div",{className:"notification is-grey-lighter",children:[Object(m.jsxs)("div",{className:"field",children:[this.state.error&&Object(m.jsx)("div",{className:"notification is-warning",children:this.state.error}),this.state.loading&&Object(m.jsx)(p,{}),Object(m.jsx)("label",{className:"label",children:"\u0418\u043c\u044d\u0439\u043b"}),Object(m.jsx)("input",{className:"input",name:"email",type:"text",onChange:this.handleType})]}),Object(m.jsxs)("div",{className:"field",children:[Object(m.jsx)("label",{className:"label",children:"\u041d\u0443\u0443\u0446 \u04af\u0433"}),Object(m.jsx)("input",{className:"input",name:"password",type:"password",onChange:this.handleType})]}),Object(m.jsx)("div",{className:"field",children:Object(m.jsx)("button",{className:"button is-link",onClick:this.handleClick,children:"\u041d\u044d\u0432\u0442\u0440\u044d\u0445"})})]})})})}}]),a}(s.Component),g=function(e){Object(o.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={error:null,loading:!1,books:[],pagination:[]},e.componentDidMount=function(){e.setState({loading:!0}),u.a.get("http://localhost:8080/api/v1/books?limit=10").then((function(t){e.setState({books:t.data.data,pagination:t.data.pagination,loading:!1})})).catch((function(t){return e.setState({error:t.response,loading:!1})}))},e.statelessComp=function(){var t=Array.apply(null,{length:e.state.pagination.pageCount}).map(Number.call,Number);return Object(m.jsx)("ul",{className:"pagination-list",children:t.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)("a",{className:"pagination-link is-current","aria-label":"Page","aria-current":"page",children:e+1})})}))})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"columns is-vcentered",children:[Object(m.jsx)("div",{className:"column is-8",children:Object(m.jsx)("h1",{className:"is-primary is-size-2",children:"\u041d\u043e\u043c\u044b\u043d \u0441\u0430\u043d"})}),Object(m.jsx)("div",{className:"column",children:Object(m.jsx)("h1",{className:"is-primary is-size-4",children:"\u0411\u0438\u0431\u043b\u0438 \u043d\u043e\u043c\u044b\u043d \u0446\u043e\u043c\u043e\u0440\u043b\u0438\u0433"})})]}),this.state.loading?Object(m.jsx)(p,{}):Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"columns is-multiline",children:this.state.books.map((function(e){var t;return Object(m.jsxs)("div",{className:"column is-3",children:[Object(m.jsx)(h.b,{to:"books/".concat(e._id),children:Object(m.jsx)("img",(t={style:{width:"50%"}},Object(j.a)(t,"style",{height:"25vh"}),Object(j.a)(t,"src","https://i.postimg.cc/"+e.photo),t))}),Object(m.jsx)("p",{className:"mt-4",children:e.name})]})}))})}),Object(m.jsx)("div",{className:"columns is-mobile is-centered my-6",children:Object(m.jsxs)("nav",{className:"pagination",role:"navigation","aria-label":"pagination",children:[1!=this.state.pagination.start&&Object(m.jsx)("a",{className:"pagination-previous",title:"This is the first page",disabled:!0,children:"\u04e8\u043c\u043d\u04e9\u0445 \u0445\u0443\u0443\u0434\u0430\u0441"}),!this.state.pagination.nextPage||1!=this.state.pagination.pageCount&&Object(m.jsx)("a",{className:"pagination-next",children:"\u0414\u0430\u0440\u0430\u0430\u0433\u0438\u0439\u043d \u0445\u0443\u0443\u0434\u0430\u0441"}),this.statelessComp()]})}),Object(m.jsx)("div",{className:"columns is-mobile is-centered my-6"}),Object(m.jsx)("footer",{class:"footer",children:Object(m.jsx)("div",{class:"content has-text-centered",children:Object(m.jsx)("p",{children:"\u0425\u044d\u0440\u044d\u0432 \u0442\u0430 \u043c\u0430\u043d\u0430\u0439 \u04af\u0439\u043b \u0430\u0436\u0438\u043b\u043b\u0430\u0433\u0430\u0430\u0433 \u0434\u044d\u043c\u0436\u0438\u0436 \u0431\u0430\u0439\u0432\u0430\u043b \u0445\u0430\u043d\u0434\u0438\u0432 \u04e9\u0440\u0433\u04e9\u04e9\u0440\u044d\u0439"})})})]})}}]),a}(s.Component),x=a(14),v=function(e){Object(o.a)(a,e);var t=Object(r.a)(a);function a(){var e,s;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(s=t.call.apply(t,[this].concat(c))).state=(e={name:null,content:null,photo:null,error:null,success:null,deleted:null,loading:null},Object(j.a)(e,"loading",!1),Object(j.a)(e,"publisher_city",null),Object(j.a)(e,"publish_year",null),Object(j.a)(e,"isbn",null),Object(j.a)(e,"book_size",null),Object(j.a)(e,"book_pages",null),Object(j.a)(e,"book_created",null),Object(j.a)(e,"book_created_author",null),Object(j.a)(e,"book_created_place",null),Object(j.a)(e,"book_created_year",null),e),s.goBack=function(){s.props.history.goBack()},s.handleSave=function(){var e=localStorage.getItem("token");s.setState({loading:!0,success:null}),u.a.put("http://localhost:8080/api/v1/books/"+s.props.match.params.id,{name:s.state.name,content:s.state.content,photo:s.state.photo,publisher_city:s.state.publisher_city,publish_year:s.state.publish_year,isbn:s.state.isbn,book_size:s.state.book_size,book_pages:s.state.book_pages,book_created:s.state.book_created,book_created_author:s.state.book_created_author,book_created_place:s.state.book_created_place,book_created_year:s.state.book_created_year},{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){console.log(e),s.setState(Object(x.a)(Object(x.a)({},e.data.data),{},{error:null,loading:!1,success:"\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u0433\u0430\u0433\u0434\u043b\u0430\u0430..."}))})).catch((function(e){s.setState({error:e.response.data.error.message,loading:!1})}))},s.handleDelete=function(){var e=localStorage.getItem("token");s.setState({loading:!0,success:null}),u.a.delete("http://localhost:8080/api/v1/books/"+s.props.match.params.id,{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){s.setState({deleted:!0})})).catch((function(e){console.log(e),s.setState({error:e.response.data.error.message,loading:!1})}))},s.handleType=function(e){var t,a=e.target,n=a.name,c=a.value;s.setState((t={},Object(j.a)(t,n,c),Object(j.a)(t,"error",null),Object(j.a)(t,"success",null),t))},s.componentDidMount=function(){u.a.get("http://localhost:8080/api/v1/books/"+s.props.match.params.id).then((function(e){s.setState(Object(x.a)(Object(x.a)({},e.data.data),{},{error:null,loading:!1}))})).catch((function(e){s.setState({error:e.response.data.error.message,loading:!1})}))},s}return Object(l.a)(a,[{key:"render",value:function(){return this.state.deleted?Object(m.jsx)("div",{className:"notification is-danger",children:"\u041d\u043e\u043c \u0443\u0441\u0442\u0433\u0430\u0433\u0434\u043b\u0430\u0430"}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"media mt-4",children:Object(m.jsxs)("div",{className:"media-content",children:[Object(m.jsxs)("div",{class:"columns is-variable is-1-mobile is-0-tablet is-3-desktop is-8-widescreen is-2-fullhd",children:[Object(m.jsx)("div",{class:"column is-one-quarter",children:Object(m.jsx)("img",{src:"https://i.postimg.cc/"+this.state.photo})}),Object(m.jsx)("div",{class:"column is-one-quarter",children:Object(m.jsx)("img",{src:"https://i.postimg.cc/"+this.state.photo})}),Object(m.jsx)("div",{class:"column is-one-quarter",children:Object(m.jsx)("img",{src:"https://i.postimg.cc/"+this.state.photo})}),Object(m.jsx)("div",{class:"column is-one-quarter",children:Object(m.jsx)("img",{src:"https://i.postimg.cc/"+this.state.photo})})]}),Object(m.jsx)("h1",{className:"title",children:this.state.name}),Object(m.jsxs)("div",{className:"field",children:[Object(m.jsx)("label",{className:"label",children:"\u041d\u044d\u0440"}),Object(m.jsx)("input",{className:"input",name:"name",value:this.state.name,onChange:this.handleType}),Object(m.jsx)("label",{className:"label",children:"\u0417\u0443\u0440\u0430\u0433"}),Object(m.jsx)("input",{className:"input",name:"photo",value:this.state.photo,onChange:this.handleType}),Object(m.jsx)("label",{className:"label",children:"\u0410\u0433\u0443\u0443\u043b\u0433\u0430"}),Object(m.jsx)("textarea",{style:{height:"20em"},className:"input",name:"content",value:this.state.content,onChange:this.handleType}),Object(m.jsx)("label",{className:"label",children:"\u0425\u044d\u0432\u043b\u044d\u0441\u044d\u043d \u0445\u043e\u0442"}),Object(m.jsx)("textarea",{className:"input",name:"publisher_city",value:this.state.publisher_city,onChange:this.handleType}),Object(m.jsx)("label",{className:"label",children:"\u0425\u044d\u0432\u043b\u044d\u0441\u044d\u043d \u043e\u043d"}),Object(m.jsx)("textarea",{className:"input",name:"publish_year",value:this.state.publish_year,onChange:this.handleType}),Object(m.jsx)("label",{className:"label",children:"ISBN"}),Object(m.jsx)("textarea",{className:"input",name:"isbn",value:this.state.isbn,onChange:this.handleType}),Object(m.jsx)("label",{className:"label",children:"\u041d\u043e\u043c\u044b\u043d \u0445\u044d\u043c\u0436\u044d\u044d \u04e9\u043d\u0434\u04e9\u0440 \u04e9\u0440\u0433\u04e9\u043d"}),Object(m.jsx)("textarea",{className:"input",name:"book_size",value:this.state.book_size,onChange:this.handleType}),Object(m.jsx)("label",{className:"label",children:"\u0425\u0443\u0443\u0434\u0430\u0441\u043d\u044b \u0442\u043e\u043e"}),Object(m.jsx)("textarea",{className:"input",name:"book_pages",value:this.state.book_pages,onChange:this.handleType}),Object(m.jsx)("label",{className:"label",children:"\u042d\u0445 \u043d\u043e\u043c\u044b\u043d \u043d\u044d\u0440"}),Object(m.jsx)("textarea",{className:"input",name:"book_created_author",value:this.state.book_created_author,onChange:this.handleType}),Object(m.jsx)("label",{className:"label",children:"\u042d\u0445 \u043d\u043e\u043c\u044b\u043d \u0433\u0430\u0437\u0430\u0440"}),Object(m.jsx)("textarea",{className:"input",name:"book_created_place",value:this.state.book_created_place,onChange:this.handleType}),Object(m.jsx)("label",{className:"label",children:"\u04ae\u0439\u043b\u0434\u0432\u044d\u0440\u043b\u044d\u0441\u044d\u043d \u043e\u043d"}),Object(m.jsx)("textarea",{className:"input",name:"book_created_year",value:this.state.book_created_year,onChange:this.handleType}),Object(m.jsx)("button",{className:"button is-link is-outlined m-2",onClick:this.handleSave,children:"\u0425\u0430\u0434\u0433\u0430\u043b\u0430\u0445"}),Object(m.jsx)("button",{className:"button is-danger is-outlined m-2",onClick:this.handleDelete,children:"\u0423\u0441\u0442\u0433\u0430\u0445"}),Object(m.jsx)("button",{className:"button is-success is-outlined m-2",onClick:this.goBack,children:"\u0411\u0443\u0446\u0430\u0445"}),this.state.success&&Object(m.jsx)("div",{className:"notification is-success",children:this.state.success}),this.state.error&&Object(m.jsx)("div",{className:"notification is-warning",children:this.state.error})]})]})})})}}]),a}(s.Component),N=function(e){Object(o.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state=Object(j.a)({name:null,content:null,photo:null,error:null,success:null,deleted:null,loading:null},"loading",!1),e.goBack=function(){e.props.history.goBack()},e.handleSave=function(){var t=localStorage.getItem("token");e.setState({loading:!0,success:null}),u.a.post("http://localhost:8080/api/v1/books/",{name:e.state.name,content:e.state.content,photo:e.state.photo},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){console.log(t),e.setState(Object(x.a)(Object(x.a)({},t.data.data),{},{error:null,loading:!1,success:"\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u0433\u0430\u0433\u0434\u043b\u0430\u0430..."}))})).catch((function(t){e.setState({error:t.response.data.error.message,loading:!1})}))},e.handleType=function(t){var a,s=t.target,n=s.name,c=s.value;e.setState((a={},Object(j.a)(a,n,c),Object(j.a)(a,"error",null),Object(j.a)(a,"success",null),a))},e.componentDidMount=function(){u.a.get("http://localhost:8080/api/v1/books/"+e.props.match.params.id).then((function(t){e.setState(Object(x.a)(Object(x.a)({},t.data.data),{},{error:null,loading:!1})),console.log(t.data.data)})).catch((function(t){e.setState({error:t.response.data.error.message,loading:!1})}))},e}return Object(l.a)(a,[{key:"render",value:function(){return this.state.deleted?Object(m.jsx)("div",{className:"notification is-danger",children:"\u041d\u043e\u043c \u0443\u0441\u0442\u0433\u0430\u0433\u0434\u043b\u0430\u0430"}):Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"media",children:[Object(m.jsx)("div",{className:"media-left",children:Object(m.jsx)("img",{src:"https://i.postimg.cc/"+this.state.photo})}),Object(m.jsxs)("div",{className:"media-content",children:[Object(m.jsx)("h1",{className:"title",children:this.state.name}),Object(m.jsxs)("div",{className:"field",children:[Object(m.jsx)("label",{className:"label",children:"\u041d\u044d\u0440"}),Object(m.jsx)("input",{className:"input",name:"name",value:this.state.name,onChange:this.handleType}),Object(m.jsx)("label",{className:"label",children:"\u0417\u0443\u0440\u0430\u0433"}),Object(m.jsx)("input",{className:"input",name:"photo",value:this.state.photo,onChange:this.handleType}),Object(m.jsx)("label",{className:"label",children:"\u0410\u0433\u0443\u0443\u043b\u0433\u0430"}),Object(m.jsx)("textarea",{style:{height:"20em"},className:"input",name:"content",value:this.state.content,onChange:this.handleType}),Object(m.jsx)("button",{className:"button is-link is-outlined m-2",onClick:this.handleSave,children:"\u041d\u043e\u043c \u043e\u0440\u0443\u0443\u043b\u0430\u0445"}),Object(m.jsx)("button",{className:"button is-success is-outlined m-2",onClick:this.goBack,children:"\u0426\u0443\u0446\u043b\u0430\u0445"}),this.state.success&&Object(m.jsx)("div",{className:"notification is-success",children:this.state.success}),this.state.error&&Object(m.jsx)("div",{className:"notification is-warning",children:this.state.error})]})]})]})})}}]),a}(s.Component);function k(e){var t=e.onLogout;return Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("nav",{className:"navbar m-4",role:"navigation","aria-label":"main navigation",children:[Object(m.jsxs)("nav",{className:"navbar",role:"navigation","aria-label":"main navigation",children:[Object(m.jsx)(h.b,{className:"button is-primary is-light",to:"/books",children:Object(m.jsx)("strong",{children:"\u041b\u043e\u0433\u043e \u0431\u0430\u0439\u043d\u0430"})}),Object(m.jsx)(h.b,{className:"button is-primary is-light",to:"/books",children:Object(m.jsx)("strong",{children:"\u041d\u043e\u043c\u0443\u0443\u0434"})}),Object(m.jsx)(h.b,{className:"button is-success is-light",to:"/books/createbook",children:Object(m.jsx)("strong",{children:"\u0428\u0438\u043d\u044d \u043d\u043e\u043c \u043d\u044d\u043c\u044d\u0445"})}),Object(m.jsx)(h.b,{className:"button is-success is-light",to:"/:id/photo",children:Object(m.jsx)("strong",{children:"\u0411\u0438\u0434\u043d\u0438\u0439 \u0442\u0443\u0445\u0430\u0439"})})]}),Object(m.jsx)("div",{className:"navbar-end",children:Object(m.jsx)("div",{className:"navbar-item",children:Object(m.jsxs)("div",{className:"buttons",children:[Object(m.jsx)("a",{className:"button is-primary is-light",children:Object(m.jsx)("strong",{children:"\u0411\u04af\u0440\u0442\u0433\u04af\u04af\u043b\u044d\u0445"})}),Object(m.jsx)("a",{className:"button is-light",onClick:t,children:"\u0413\u0430\u0440\u0430\u0445"})]})})})]})})}var f=function(e){Object(o.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(i.a)(this,a);for(var s=arguments.length,n=new Array(s),c=0;c<s;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={token:null},e.handleLogin=function(t){e.setState({token:t}),localStorage.setItem("token",t),e.router.history.push("/books")},e.handleLogout=function(){localStorage.removeItem("token"),e.setState({token:null}),e.router.history.push("/login")},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(m.jsx)(h.a,{ref:function(t){return e.router=t},children:Object(m.jsxs)("div",{children:[Object(m.jsx)(k,{onLogout:this.handleLogout}),Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)(b.c,{children:[Object(m.jsx)(b.a,{exact:!0,path:"/",component:g}),Object(m.jsx)(b.a,{exact:!0,path:"/books",component:g}),Object(m.jsx)(b.a,{path:"/books/:id",component:v}),Object(m.jsx)(b.a,{path:"/books/createbook",component:N}),Object(m.jsx)(b.a,{path:"/login",render:function(){return Object(m.jsx)(O,{onLogin:e.handleLogin})}})]})})]})})}}]),a}(s.Component);c.a.render(Object(m.jsx)(f,{}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.c8aa4356.chunk.js.map